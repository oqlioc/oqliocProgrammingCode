#define _CRT_SECURE_NO_WARNINGS
#include <stdio.h>
#include <malloc.h>


void NumInput(int **n)
{
	printf(" 학생은 몇명? : ");
	scanf("%d", &n);
}
void MemoryStu(int **n, int stu)
{
	stu = (int **)malloc(**n * sizeof(int));
}

void MemoryName(int **n, char name)
{
	name = (char **)malloc(**n * sizeof(char*));
}

void MemorySum(int n, int sum)
{
	sum = (int *)malloc(**n * sizeof(int));
}

void MemoryAvg(int **n, float avg)
{
	avg = (float *)malloc(**n * sizeof(float));
}

void StudentInput(int **n, char **name, int *sum, int **stu, float *avg)
{
	for(int i = 0; i < **n; i++)
	{
			name[i] = (char *)malloc(10 * sizeof(char));
			printf(" 학생 이름? : ");
			scanf("%s", name[i]);

			sum[i] = 0;

		for(int j = 0; j < 3; j++)
		{
			stu[i] = (int *)malloc(3 * sizeof(int));

			printf(" %s 학생의 국영수 점수? : " , name[i]);
			scanf("%d", &stu[i][j]);
			sum[i] += stu[i][j];
		}
	}
}

void Getsum(int **n, int *sum, int **stu)
{
	for(int i = 0; i < **n; i++)
	{
		for(int j = 0; j < 3; j++)
		{
			sum[i] += stu[i][j];
		}
	}
}

void Sumavg(int **n, int *sum, float *avg)
{
	for(int i = 0; i < **n; i++)
	{
		avg[i] = sum[i] /3;
	}
}



void Output(int **n, char **name, int *sum, float *avg)
{
	for(int i = 0; i < **n; i++)
	{
		printf(" 이름 : %s \n", name[i]);
		printf(" 총합 : %d \n", sum[i]);
		printf(" 평균 : %f \n", avg[i]);
	}
}



int main(void)
{
	int **stu;
	int *n;
	char **name;
	int *sum;
	float *avg;

	
	NumInput(&n);
	MemoryStu(&n, stu);
	MemoryName();
	MemorySum();
	MemoryAvg();
	StudentInput(&n, name, sum, stu, avg);
	Getsum(&n, sum, stu);
	Sumavg(&n, sum, avg);
	Output(&n, name, sum, avg);

	free(stu);
	free(sum);
	free(avg);
}
